# Project Facts
- Repo: pringless01/GameBY
- Ana branch: main
- Paket/komut sınamaları:
	- Root lint: npm run lint
	- API test: npm --prefix apps/api/src test
	- API coverage: npm --prefix apps/api/src run coverage


## Repo snapshot (kısa)
- Monorepo (Node >=18, ESM): apps/api, apps/web, packages/shared-*, docs/, infra/, server/ mevcut.
- API workspace: `apps/api/src` (oyun-backend); testler unit+integration yoğun şekilde burada.
- Frontend: `apps/web` (workspaces) ve ayrıca legacy `frontend/` PWA statik içerik.
- Shared paketler: `packages/shared-utils`, `packages/shared-types`.
- Backend eski klasör yapısı da mevcut: `server/` (routes/services/cache/security/utils/...)
- Kritik kurallar: importlarda .js uzantısı, ESM modülü, controller-first; middleware yolu tekil: `apps/api/src/http/middleware/auth.js`.
- Leaderboard kuralları ve header konvansiyonu: `.github/copilot-instructions.md` dokümanındaki sabit başlıklar korunmalı.

## Workspaces ve scriptler (özet)
- Root workspaces: apps/*, apps/api/src, packages/*
- Root scripts:
	- lint, lint:fix, test (workspaces), smoke:local, dc:up, dc:down, coverage, ci:all
- apps/api/src (oyun-backend):
	- test kompozisyonu: unit (cursor-security, reputation-decay, onboarding, cache, auth-refresh) + integration (contracts, funds, barter, trustcap, leaderboard, mentor-flow, fraud-risk, contract-risk, abuse-stats, weak-secret, ws-auth, marketplace-idem)
- CI workflows: ci.yml (root workspaces), ci-full.yml (server pipeline), memory-rollup.yml (günlük roll-up)

## Açık işler
- Domain split: economy, fraud, chat mantığını service/repo katmanlarına indirmek (davranış değiştirmeden).
- ESLint modül sınırlarını sertleştirmek (no-cycle, no-restricted-imports; import/order; no-unused-vars istisnaları).
- Shared utils/types genişletme: pagination, dates, hmac wrapper; DTO ekleri (davranışsız).
- CI rehberi: env secret min uzunlukları, report-only check; compose smoke ve memory roll-up workflow’ları.
- Dokümantasyon güncelleme: architecture/index/security + weekly report ve sweep raporu artifact’i.

## Kalite durumu (2025-08-16)
- Lint: PASS (0 warning; root `npm run lint`).
- Test: PASS (apps/api/src tüm unit+integration). Bazı testler env için `CURSOR_SECRET:weak/invalid` uyarılarını beklenen şekilde logluyor.
- Güvenlik: `npm ci` sonrası 2 low severity vulnerability (npm audit raporuna göre) — davranış dışı, izlemeye alındı.

### Notlar
- Module Boundaries enforced: import/no-cycle + no-restricted-imports kuralları root ESLint’e eklendi (davranış değişimi yok).
- Economy: modules/economy altında facade (economy.service.js) hazır; unit test eklendi (tests/unit/economy.service.test.js). Tam test suite PASS.

---
- [2025-08-16 12:00] memory/bootstrap: İlk okuma & 5 maddelik özet raporu eklendi (docs/reports/2025-08-16_bootstrap.md).
- [2025-08-16 12:10] status/next-actions: Run workflow adımı Blocked olarak not edildi; rapor eklendi (docs/reports/2025-08-16_run-workflow.md).
- [2025-08-16 12:18] memory/project_facts: Repo workspaces, scriptler ve CI özetleri eklendi (docs/reports/2025-08-16_project-facts.md).
- [2025-08-16 12:26] docs/readme: Hafıza Sistemi bölümü README.md’ye eklendi (docs/reports/2025-08-16_readme-memory.md).
 - [2025-08-16 12:40] closure: Next Actions temizlendi; final rapor yazıldı (docs/reports/2025-08-16_final.md). Lint/Test yeşil.
 - [2025-08-16 13:00] memory/bootstrap: Özet güncellendi; önceki bootstrap arşivlendi (docs/archive/2025-08-16_bootstrap.prev.md).
 - [2025-08-16 13:05] fraud/unit: Fraud servisine repo stub ile birim test eklendi; lint/test yeşil (commit d4e5036). Rapor: docs/reports/2025-08-16_fraud-service-unit.md
 - [2025-08-16 13:15] memory/bootstrap: Mevcut durum okundu, 5 maddelik özet bootstrap raporuna eklendi
 - [2025-08-16 13:20] eslint/boundaries: Module boundary kuralları doğrulandı - ihlal yok, lint+test PASS
 - [2025-08-16 13:25] docs/update: architecture/index/security güncellendi, haftalık rapor oluşturuldu - lint+test PASS
 - [2025-08-16 13:30] ci/workflow: GitHub Actions workflows doğrulandı, memory rollup test edildi - tamamen operasyonel
 - [2025-08-16 13:15] shared-utils/types: Pagination helpers (normalizeLimit/Offset) ve PaginationParams DTO eklendi; davranış değişimi yok. Rapor: docs/reports/2025-08-16_shared-utils-types.md

- [2025-08-16 14:10] memory/bootstrap: Rapor güncellendi; Next Actions roadmap'tan seed edildi (docs/reports/2025-08-16_bootstrap.md)

- [2025-08-16T06:37:28.367Z] bootstrap summary appended
- [2025-08-16T06:37:30.480Z] bootstrap summary appended
- [2025-08-16T06:37:32.586Z] bootstrap summary appended
- [2025-08-16T06:37:34.694Z] bootstrap summary appended
- [2025-08-16T06:37:36.798Z] bootstrap summary appended
- [2025-08-16T06:37:39.022Z] bootstrap summary appended
- [2025-08-16T06:37:41.144Z] bootstrap summary appended
- [2025-08-16T06:37:43.241Z] bootstrap summary appended
- [2025-08-16T06:37:45.370Z] bootstrap summary appended
- [2025-08-16T06:37:47.464Z] bootstrap summary appended
- [2025-08-16T06:37:49.571Z] bootstrap summary appended
- [2025-08-16T06:37:51.660Z] bootstrap summary appended
- [2025-08-16T06:37:53.791Z] bootstrap summary appended
- [2025-08-16T06:37:55.886Z] bootstrap summary appended
- [2025-08-16T06:37:58.003Z] bootstrap summary appended
- [2025-08-16T06:38:00.148Z] bootstrap summary appended
- [2025-08-16T06:38:02.291Z] bootstrap summary appended
- [2025-08-16T06:38:04.430Z] bootstrap summary appended
- [2025-08-16T06:38:06.626Z] bootstrap summary appended
- [2025-08-16T06:38:08.925Z] bootstrap summary appended
- [2025-08-16T06:38:11.050Z] bootstrap summary appended
- [2025-08-16T06:38:13.186Z] bootstrap summary appended
- [2025-08-16T06:38:15.325Z] bootstrap summary appended
- [2025-08-16T06:38:17.444Z] bootstrap summary appended
- [2025-08-16T06:38:19.657Z] bootstrap summary appended
- [2025-08-16T06:38:21.778Z] bootstrap summary appended
- [2025-08-16T06:38:24.047Z] bootstrap summary appended
- [2025-08-16T06:38:26.252Z] bootstrap summary appended
- [2025-08-16T06:38:28.459Z] bootstrap summary appended
- [2025-08-16T06:38:30.629Z] bootstrap summary appended
- [2025-08-16T06:38:32.704Z] bootstrap summary appended
- [2025-08-16T06:38:34.836Z] bootstrap summary appended
- [2025-08-16T06:38:36.917Z] bootstrap summary appended
- [2025-08-16T06:38:39.042Z] bootstrap summary appended
- [2025-08-16T06:38:41.140Z] bootstrap summary appended
- [2025-08-16T06:38:43.226Z] bootstrap summary appended
- [2025-08-16T06:38:45.329Z] bootstrap summary appended
- [2025-08-16T06:38:47.395Z] bootstrap summary appended
- [2025-08-16T06:38:49.502Z] bootstrap summary appended
- [2025-08-16T06:38:51.619Z] bootstrap summary appended
- [2025-08-16T06:38:53.711Z] bootstrap summary appended
- [2025-08-16T06:38:55.843Z] bootstrap summary appended
- [2025-08-16T06:38:57.954Z] bootstrap summary appended
- [2025-08-16T06:39:00.163Z] bootstrap summary appended
- [2025-08-16T06:39:02.286Z] bootstrap summary appended
- [2025-08-16T06:39:04.398Z] bootstrap summary appended
- [2025-08-16T06:39:06.521Z] bootstrap summary appended
- [2025-08-16T06:39:08.638Z] bootstrap summary appended
- [2025-08-16T06:39:10.756Z] bootstrap summary appended
- [2025-08-16T06:39:12.844Z] bootstrap summary appended
- [2025-08-16T06:39:14.948Z] bootstrap summary appended
- [2025-08-16T06:39:17.246Z] bootstrap summary appended
- [2025-08-16T06:39:19.632Z] bootstrap summary appended
- [2025-08-16T06:39:21.767Z] bootstrap summary appended
- [2025-08-16T06:39:41.422Z] bootstrap summary appended
- [2025-08-16T06:39:43.498Z] bootstrap summary appended
- [2025-08-16T06:39:45.586Z] bootstrap summary appended
- [2025-08-16T06:39:47.705Z] bootstrap summary appended
- [2025-08-16T06:39:49.899Z] bootstrap summary appended
- [2025-08-16T06:39:52.029Z] bootstrap summary appended
- [2025-08-16T06:39:54.154Z] bootstrap summary appended
- [2025-08-16T06:39:56.289Z] bootstrap summary appended
- [2025-08-16T06:39:58.383Z] bootstrap summary appended
- [2025-08-16T06:40:00.550Z] bootstrap summary appended
- [2025-08-16T06:40:02.831Z] bootstrap summary appended
- [2025-08-16T06:40:04.931Z] bootstrap summary appended
- [2025-08-16T06:40:07.205Z] bootstrap summary appended
- [2025-08-16T06:40:09.391Z] bootstrap summary appended
- [2025-08-16T06:40:11.550Z] bootstrap summary appended
- [2025-08-16T06:40:13.723Z] bootstrap summary appended
- [2025-08-16T06:40:15.983Z] bootstrap summary appended
- [2025-08-16T06:40:18.099Z] bootstrap summary appended
- [2025-08-16T06:40:20.211Z] bootstrap summary appended
- [2025-08-16T06:40:22.302Z] bootstrap summary appended
- [2025-08-16T06:40:24.445Z] bootstrap summary appended
- [2025-08-16T06:40:26.617Z] bootstrap summary appended
- [2025-08-16T06:40:28.765Z] bootstrap summary appended
- [2025-08-16T06:40:30.893Z] bootstrap summary appended
- [2025-08-16T06:40:33.021Z] bootstrap summary appended
- [2025-08-16T06:40:35.120Z] bootstrap summary appended
- [2025-08-16T06:40:37.281Z] bootstrap summary appended
- [2025-08-16T06:40:39.490Z] bootstrap summary appended
- [2025-08-16T06:41:14.878Z] bootstrap summary appended
- [2025-08-16T06:41:16.950Z] bootstrap summary appended
- [2025-08-16T06:41:19.069Z] bootstrap summary appended
- [2025-08-16T06:41:21.136Z] bootstrap summary appended
- [2025-08-16T06:41:23.202Z] bootstrap summary appended
- [2025-08-16T06:41:25.326Z] bootstrap summary appended
- [2025-08-16T06:41:27.403Z] bootstrap summary appended
- [2025-08-16T06:41:29.519Z] bootstrap summary appended
- [2025-08-16T06:41:31.681Z] bootstrap summary appended
- [2025-08-16T06:41:33.863Z] bootstrap summary appended
- [2025-08-16T06:41:36.112Z] bootstrap summary appended
- [2025-08-16T06:41:38.267Z] bootstrap summary appended
- [2025-08-16T06:41:40.397Z] bootstrap summary appended
- [2025-08-16T06:41:42.541Z] bootstrap summary appended
- [2025-08-16T06:41:44.764Z] bootstrap summary appended
- [2025-08-16T06:41:46.892Z] bootstrap summary appended
- [2025-08-16T06:41:49.003Z] bootstrap summary appended
- [2025-08-16T06:41:51.157Z] bootstrap summary appended
- [2025-08-16T06:41:53.292Z] bootstrap summary appended
- [2025-08-16T06:41:55.433Z] bootstrap summary appended
- [2025-08-16T06:41:57.564Z] bootstrap summary appended
- [2025-08-16T06:42:26.496Z] bootstrap summary appended
- [2025-08-16T06:42:28.583Z] bootstrap summary appended
- [2025-08-16T06:42:30.671Z] bootstrap summary appended
- [2025-08-16T06:42:32.793Z] bootstrap summary appended
- [2025-08-16T06:42:34.858Z] bootstrap summary appended
- [2025-08-16T06:42:37.000Z] bootstrap summary appended
- [2025-08-16T06:42:39.191Z] bootstrap summary appended
- [2025-08-16T06:42:41.276Z] bootstrap summary appended
- [2025-08-16T06:42:43.349Z] bootstrap summary appended
- [2025-08-16T06:42:45.455Z] bootstrap summary appended
- [2025-08-16T06:42:47.575Z] bootstrap summary appended
- [2025-08-16T06:42:49.656Z] bootstrap summary appended
- [2025-08-16T06:42:51.720Z] bootstrap summary appended
- [2025-08-16T06:42:53.830Z] bootstrap summary appended
- [2025-08-16T06:42:55.915Z] bootstrap summary appended
- [2025-08-16T06:42:57.983Z] bootstrap summary appended
- [2025-08-16T06:43:00.096Z] bootstrap summary appended
- [2025-08-16T06:43:02.236Z] bootstrap summary appended
- [2025-08-16T06:43:04.503Z] bootstrap summary appended
- [2025-08-16T06:43:06.836Z] bootstrap summary appended
- [2025-08-16T06:43:09.226Z] bootstrap summary appended
- [2025-08-16T06:43:11.341Z] bootstrap summary appended
- [2025-08-16T06:43:47.641Z] bootstrap summary appended
- [2025-08-16T06:43:49.740Z] bootstrap summary appended
- [2025-08-16T06:43:51.852Z] bootstrap summary appended
- [2025-08-16T06:43:53.946Z] bootstrap summary appended
- [2025-08-16T06:43:56.009Z] bootstrap summary appended
- [2025-08-16T06:43:58.077Z] bootstrap summary appended
- [2025-08-16T06:44:00.148Z] bootstrap summary appended
- [2025-08-16T06:44:02.242Z] bootstrap summary appended
- [2025-08-16T06:44:04.336Z] bootstrap summary appended
- [2025-08-16T06:44:06.471Z] bootstrap summary appended
- [2025-08-16T06:44:08.752Z] bootstrap summary appended
- [2025-08-16T06:44:11.100Z] bootstrap summary appended
- [2025-08-16T06:44:13.282Z] bootstrap summary appended
- [2025-08-16T06:44:15.573Z] bootstrap summary appended
- [2025-08-16T06:44:17.772Z] bootstrap summary appended